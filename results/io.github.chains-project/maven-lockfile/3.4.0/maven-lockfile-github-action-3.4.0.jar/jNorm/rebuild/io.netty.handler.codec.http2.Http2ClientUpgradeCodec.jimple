public class io.netty.handler.codec.http2.Http2ClientUpgradeCodec extends java.lang.Object implements io.netty.handler.codec.http.HttpClientUpgradeHandler$UpgradeCodec
{
private static final java.util.List UPGRADE_HEADERS;
private final java.lang.String handlerName;
private final io.netty.handler.codec.http2.Http2ConnectionHandler connectionHandler;
private final io.netty.channel.ChannelHandler upgradeToHandler;
private final io.netty.channel.ChannelHandler http2MultiplexHandler;
public void <init>(io.netty.handler.codec.http2.Http2FrameCodec, io.netty.channel.ChannelHandler)
{
io.netty.handler.codec.http2.Http2ClientUpgradeCodec v0;
io.netty.handler.codec.http2.Http2FrameCodec v1;
io.netty.channel.ChannelHandler v2;
v0 := @this: io.netty.handler.codec.http2.Http2ClientUpgradeCodec;
v1 := @parameter0: io.netty.handler.codec.http2.Http2FrameCodec;
v2 := @parameter1: io.netty.channel.ChannelHandler;
specialinvoke v0.<io.netty.handler.codec.http2.Http2ClientUpgradeCodec: void <init>(java.lang.String,io.netty.handler.codec.http2.Http2FrameCodec,io.netty.channel.ChannelHandler)>(null, v1, v2);
return;
}
public void <init>(java.lang.String, io.netty.handler.codec.http2.Http2FrameCodec, io.netty.channel.ChannelHandler)
{
io.netty.handler.codec.http2.Http2ClientUpgradeCodec v0;
io.netty.handler.codec.http2.Http2FrameCodec v2;
io.netty.channel.ChannelHandler v3;
java.lang.String v1;
v0 := @this: io.netty.handler.codec.http2.Http2ClientUpgradeCodec;
v1 := @parameter0: java.lang.String;
v2 := @parameter1: io.netty.handler.codec.http2.Http2FrameCodec;
v3 := @parameter2: io.netty.channel.ChannelHandler;
specialinvoke v0.<io.netty.handler.codec.http2.Http2ClientUpgradeCodec: void <init>(java.lang.String,io.netty.handler.codec.http2.Http2ConnectionHandler,io.netty.channel.ChannelHandler,io.netty.handler.codec.http2.Http2MultiplexHandler)>(v1, v2, v3, null);
return;
}
public void <init>(io.netty.handler.codec.http2.Http2ConnectionHandler)
{
io.netty.handler.codec.http2.Http2ClientUpgradeCodec v0;
java.lang.String v2;
io.netty.handler.codec.http2.Http2ConnectionHandler v1;
v0 := @this: io.netty.handler.codec.http2.Http2ClientUpgradeCodec;
v1 := @parameter0: io.netty.handler.codec.http2.Http2ConnectionHandler;
v2 = null;
specialinvoke v0.<io.netty.handler.codec.http2.Http2ClientUpgradeCodec: void <init>(java.lang.String,io.netty.handler.codec.http2.Http2ConnectionHandler)>(v2, v1);
return;
}
public void <init>(io.netty.handler.codec.http2.Http2ConnectionHandler, io.netty.handler.codec.http2.Http2MultiplexHandler)
{
io.netty.handler.codec.http2.Http2ClientUpgradeCodec v0;
io.netty.handler.codec.http2.Http2MultiplexHandler v2;
java.lang.String v3;
io.netty.handler.codec.http2.Http2ConnectionHandler v1;
v0 := @this: io.netty.handler.codec.http2.Http2ClientUpgradeCodec;
v1 := @parameter0: io.netty.handler.codec.http2.Http2ConnectionHandler;
v2 := @parameter1: io.netty.handler.codec.http2.Http2MultiplexHandler;
v3 = null;
specialinvoke v0.<io.netty.handler.codec.http2.Http2ClientUpgradeCodec: void <init>(java.lang.String,io.netty.handler.codec.http2.Http2ConnectionHandler,io.netty.handler.codec.http2.Http2MultiplexHandler)>(v3, v1, v2);
return;
}
public void <init>(java.lang.String, io.netty.handler.codec.http2.Http2ConnectionHandler)
{
io.netty.handler.codec.http2.Http2ClientUpgradeCodec v0;
java.lang.String v1;
io.netty.handler.codec.http2.Http2ConnectionHandler v2;
v0 := @this: io.netty.handler.codec.http2.Http2ClientUpgradeCodec;
v1 := @parameter0: java.lang.String;
v2 := @parameter1: io.netty.handler.codec.http2.Http2ConnectionHandler;
specialinvoke v0.<io.netty.handler.codec.http2.Http2ClientUpgradeCodec: void <init>(java.lang.String,io.netty.handler.codec.http2.Http2ConnectionHandler,io.netty.channel.ChannelHandler,io.netty.handler.codec.http2.Http2MultiplexHandler)>(v1, v2, v2, null);
return;
}
public void <init>(java.lang.String, io.netty.handler.codec.http2.Http2ConnectionHandler, io.netty.handler.codec.http2.Http2MultiplexHandler)
{
io.netty.handler.codec.http2.Http2ClientUpgradeCodec v0;
io.netty.handler.codec.http2.Http2MultiplexHandler v3;
java.lang.String v1;
io.netty.handler.codec.http2.Http2ConnectionHandler v2;
v0 := @this: io.netty.handler.codec.http2.Http2ClientUpgradeCodec;
v1 := @parameter0: java.lang.String;
v2 := @parameter1: io.netty.handler.codec.http2.Http2ConnectionHandler;
v3 := @parameter2: io.netty.handler.codec.http2.Http2MultiplexHandler;
specialinvoke v0.<io.netty.handler.codec.http2.Http2ClientUpgradeCodec: void <init>(java.lang.String,io.netty.handler.codec.http2.Http2ConnectionHandler,io.netty.channel.ChannelHandler,io.netty.handler.codec.http2.Http2MultiplexHandler)>(v1, v2, v2, v3);
return;
}
private void <init>(java.lang.String, io.netty.handler.codec.http2.Http2ConnectionHandler, io.netty.channel.ChannelHandler, io.netty.handler.codec.http2.Http2MultiplexHandler)
{
io.netty.handler.codec.http2.Http2ClientUpgradeCodec v0;
io.netty.handler.codec.http2.Http2MultiplexHandler v4;
io.netty.channel.ChannelHandler v3;
java.lang.Object v5, v6;
java.lang.String v1;
io.netty.handler.codec.http2.Http2ConnectionHandler v2;
v0 := @this: io.netty.handler.codec.http2.Http2ClientUpgradeCodec;
v1 := @parameter0: java.lang.String;
v2 := @parameter1: io.netty.handler.codec.http2.Http2ConnectionHandler;
v3 := @parameter2: io.netty.channel.ChannelHandler;
v4 := @parameter3: io.netty.handler.codec.http2.Http2MultiplexHandler;
specialinvoke v0.<java.lang.Object: void <init>()>();
v0.<io.netty.handler.codec.http2.Http2ClientUpgradeCodec: java.lang.String handlerName> = v1;
v5 = staticinvoke <io.netty.util.internal.ObjectUtil: java.lang.Object checkNotNull(java.lang.Object,java.lang.String)>(v2, "connectionHandler");
v0.<io.netty.handler.codec.http2.Http2ClientUpgradeCodec: io.netty.handler.codec.http2.Http2ConnectionHandler connectionHandler> = v5;
v6 = staticinvoke <io.netty.util.internal.ObjectUtil: java.lang.Object checkNotNull(java.lang.Object,java.lang.String)>(v3, "upgradeToHandler");
v0.<io.netty.handler.codec.http2.Http2ClientUpgradeCodec: io.netty.channel.ChannelHandler upgradeToHandler> = v6;
v0.<io.netty.handler.codec.http2.Http2ClientUpgradeCodec: io.netty.channel.ChannelHandler http2MultiplexHandler> = v4;
return;
}
public java.lang.CharSequence protocol()
{
io.netty.handler.codec.http2.Http2ClientUpgradeCodec v0;
java.lang.CharSequence v1;
v0 := @this: io.netty.handler.codec.http2.Http2ClientUpgradeCodec;
v1 = <io.netty.handler.codec.http2.Http2CodecUtil: java.lang.CharSequence HTTP_UPGRADE_PROTOCOL_NAME>;
return v1;
}
public java.util.Collection setUpgradeHeaders(io.netty.channel.ChannelHandlerContext, io.netty.handler.codec.http.HttpRequest)
{
io.netty.handler.codec.http2.Http2ClientUpgradeCodec v0;
io.netty.channel.ChannelHandlerContext v1;
java.util.List v6;
io.netty.handler.codec.http.HttpHeaders v4;
io.netty.handler.codec.http.HttpRequest v2;
java.lang.CharSequence v3, v5;
v0 := @this: io.netty.handler.codec.http2.Http2ClientUpgradeCodec;
v1 := @parameter0: io.netty.channel.ChannelHandlerContext;
v2 := @parameter1: io.netty.handler.codec.http.HttpRequest;
v3 = specialinvoke v0.<io.netty.handler.codec.http2.Http2ClientUpgradeCodec: java.lang.CharSequence getSettingsHeaderValue(io.netty.channel.ChannelHandlerContext)>(v1);
v4 = interfaceinvoke v2.<io.netty.handler.codec.http.HttpRequest: io.netty.handler.codec.http.HttpHeaders headers()>();
v5 = <io.netty.handler.codec.http2.Http2CodecUtil: java.lang.CharSequence HTTP_UPGRADE_SETTINGS_HEADER>;
virtualinvoke v4.<io.netty.handler.codec.http.HttpHeaders: io.netty.handler.codec.http.HttpHeaders set(java.lang.CharSequence,java.lang.Object)>(v5, v3);
v6 = <io.netty.handler.codec.http2.Http2ClientUpgradeCodec: java.util.List UPGRADE_HEADERS>;
return v6;
}
public void upgradeTo(io.netty.channel.ChannelHandlerContext, io.netty.handler.codec.http.FullHttpResponse) throws java.lang.Exception
{
io.netty.handler.codec.http2.Http2ClientUpgradeCodec v0;
io.netty.channel.ChannelHandlerContext v1, v10;
io.netty.handler.codec.http2.Http2Exception v15;
java.lang.String v11, v4, v5;
io.netty.channel.ChannelPipeline v12, v3, v8;
io.netty.handler.codec.http2.Http2ConnectionHandler v14, v9;
io.netty.handler.codec.http.FullHttpResponse v2;
io.netty.channel.ChannelHandler v13, v6, v7;
v0 := @this: io.netty.handler.codec.http2.Http2ClientUpgradeCodec;
v1 := @parameter0: io.netty.channel.ChannelHandlerContext;
v2 := @parameter1: io.netty.handler.codec.http.FullHttpResponse;
label1:
v3 = interfaceinvoke v1.<io.netty.channel.ChannelHandlerContext: io.netty.channel.ChannelPipeline pipeline()>();
v4 = interfaceinvoke v1.<io.netty.channel.ChannelHandlerContext: java.lang.String name()>();
v5 = v0.<io.netty.handler.codec.http2.Http2ClientUpgradeCodec: java.lang.String handlerName>;
v6 = v0.<io.netty.handler.codec.http2.Http2ClientUpgradeCodec: io.netty.channel.ChannelHandler upgradeToHandler>;
interfaceinvoke v3.<io.netty.channel.ChannelPipeline: io.netty.channel.ChannelPipeline addAfter(java.lang.String,java.lang.String,io.netty.channel.ChannelHandler)>(v4, v5, v6);
v7 = v0.<io.netty.handler.codec.http2.Http2ClientUpgradeCodec: io.netty.channel.ChannelHandler http2MultiplexHandler>;
if v7 == null goto label2;
v8 = interfaceinvoke v1.<io.netty.channel.ChannelHandlerContext: io.netty.channel.ChannelPipeline pipeline()>();
v9 = v0.<io.netty.handler.codec.http2.Http2ClientUpgradeCodec: io.netty.handler.codec.http2.Http2ConnectionHandler connectionHandler>;
v10 = interfaceinvoke v8.<io.netty.channel.ChannelPipeline: io.netty.channel.ChannelHandlerContext context(io.netty.channel.ChannelHandler)>(v9);
v11 = interfaceinvoke v10.<io.netty.channel.ChannelHandlerContext: java.lang.String name()>();
v12 = interfaceinvoke v1.<io.netty.channel.ChannelHandlerContext: io.netty.channel.ChannelPipeline pipeline()>();
v13 = v0.<io.netty.handler.codec.http2.Http2ClientUpgradeCodec: io.netty.channel.ChannelHandler http2MultiplexHandler>;
interfaceinvoke v12.<io.netty.channel.ChannelPipeline: io.netty.channel.ChannelPipeline addAfter(java.lang.String,java.lang.String,io.netty.channel.ChannelHandler)>(v11, null, v13);
label2:
v14 = v0.<io.netty.handler.codec.http2.Http2ClientUpgradeCodec: io.netty.handler.codec.http2.Http2ConnectionHandler connectionHandler>;
virtualinvoke v14.<io.netty.handler.codec.http2.Http2ConnectionHandler: void onHttpClientUpgrade()>();
label3:
goto label5;
label4:
v15 := @caughtexception;
interfaceinvoke v1.<io.netty.channel.ChannelHandlerContext: io.netty.channel.ChannelHandlerContext fireExceptionCaught(java.lang.Throwable)>(v15);
interfaceinvoke v1.<io.netty.channel.ChannelHandlerContext: io.netty.channel.ChannelFuture close()>();
label5:
return;
catch io.netty.handler.codec.http2.Http2Exception from label1 to label3 with label4;
}
private java.lang.CharSequence getSettingsHeaderValue(io.netty.channel.ChannelHandlerContext)
{
java.lang.Throwable v20;
io.netty.buffer.ByteBufAllocator v9;
java.lang.Iterable v10;
io.netty.handler.codec.http2.Http2ConnectionDecoder v5;
io.netty.handler.codec.http2.Http2ClientUpgradeCodec v0;
io.netty.channel.ChannelHandlerContext v1;
io.netty.buffer.ByteBuf v2, v3;
java.nio.charset.Charset v18;
int v16, v7, v8;
java.lang.String v19;
boolean v12;
java.util.Iterator v11;
char v14;
io.netty.handler.codec.http2.Http2ConnectionHandler v4;
io.netty.handler.codec.http2.Http2Settings v6;
java.lang.Object v13, v15;
io.netty.handler.codec.base64.Base64Dialect v17;
v0 := @this: io.netty.handler.codec.http2.Http2ClientUpgradeCodec;
v1 := @parameter0: io.netty.channel.ChannelHandlerContext;
v2 = null;
v3 = null;
label1:
v4 = v0.<io.netty.handler.codec.http2.Http2ClientUpgradeCodec: io.netty.handler.codec.http2.Http2ConnectionHandler connectionHandler>;
v5 = virtualinvoke v4.<io.netty.handler.codec.http2.Http2ConnectionHandler: io.netty.handler.codec.http2.Http2ConnectionDecoder decoder()>();
v6 = interfaceinvoke v5.<io.netty.handler.codec.http2.Http2ConnectionDecoder: io.netty.handler.codec.http2.Http2Settings localSettings()>();
v7 = virtualinvoke v6.<io.netty.handler.codec.http2.Http2Settings: int size()>();
v8 = 6 * v7;
v9 = interfaceinvoke v1.<io.netty.channel.ChannelHandlerContext: io.netty.buffer.ByteBufAllocator alloc()>();
v2 = interfaceinvoke v9.<io.netty.buffer.ByteBufAllocator: io.netty.buffer.ByteBuf buffer(int)>(v8);
v10 = virtualinvoke v6.<io.netty.handler.codec.http2.Http2Settings: java.lang.Iterable entries()>();
v11 = interfaceinvoke v10.<java.lang.Iterable: java.util.Iterator iterator()>();
label2:
v12 = interfaceinvoke v11.<java.util.Iterator: boolean hasNext()>();
if v12 == 0 goto label3;
v13 = interfaceinvoke v11.<java.util.Iterator: java.lang.Object next()>();
v14 = interfaceinvoke v13.<io.netty.util.collection.CharObjectMap$PrimitiveEntry: char key()>();
virtualinvoke v2.<io.netty.buffer.ByteBuf: io.netty.buffer.ByteBuf writeChar(int)>(v14);
v15 = interfaceinvoke v13.<io.netty.util.collection.CharObjectMap$PrimitiveEntry: java.lang.Object value()>();
v16 = virtualinvoke v15.<java.lang.Long: int intValue()>();
virtualinvoke v2.<io.netty.buffer.ByteBuf: io.netty.buffer.ByteBuf writeInt(int)>(v16);
goto label2;
label3:
v17 = <io.netty.handler.codec.base64.Base64Dialect: io.netty.handler.codec.base64.Base64Dialect URL_SAFE>;
v3 = staticinvoke <io.netty.handler.codec.base64.Base64: io.netty.buffer.ByteBuf encode(io.netty.buffer.ByteBuf,io.netty.handler.codec.base64.Base64Dialect)>(v2, v17);
v18 = <io.netty.util.CharsetUtil: java.nio.charset.Charset UTF_8>;
v19 = virtualinvoke v3.<io.netty.buffer.ByteBuf: java.lang.String toString(java.nio.charset.Charset)>(v18);
label4:
staticinvoke <io.netty.util.ReferenceCountUtil: boolean release(java.lang.Object)>(v2);
staticinvoke <io.netty.util.ReferenceCountUtil: boolean release(java.lang.Object)>(v3);
return v19;
label5:
v20 := @caughtexception;
staticinvoke <io.netty.util.ReferenceCountUtil: boolean release(java.lang.Object)>(v2);
staticinvoke <io.netty.util.ReferenceCountUtil: boolean release(java.lang.Object)>(v3);
throw v20;
catch java.lang.Throwable from label1 to label4 with label5;
}
static void <clinit>()
{
java.util.List v1;
java.lang.CharSequence v0;
v0 = <io.netty.handler.codec.http2.Http2CodecUtil: java.lang.CharSequence HTTP_UPGRADE_SETTINGS_HEADER>;
v1 = staticinvoke <java.util.Collections: java.util.List singletonList(java.lang.Object)>(v0);
<io.netty.handler.codec.http2.Http2ClientUpgradeCodec: java.util.List UPGRADE_HEADERS> = v1;
return;
}
}